---
layout: post
title:  "系统设计心得"
date:   2019-06-28 00:18:23 +0700
categories: [Java]
tags:   SystemDesign
comments: true
---

摘要：记录软件方案设计的一些心得，主要是各模块之间的交互方式。

------

## 思路

最近在做一个分布式任务调度系统的设计，目标是所有的离线任务由调度平台调度，所以需要做到业务系统和调度平台解耦，并且离线任务和调度平台解耦。最开始的时候由于边界划分不清晰，导致流程怎么都发现不通，所以这里总结一下：

* 有哪些需求？首先需要明确有哪些需求；

* 有哪些系统？以及各个系统完成哪些功能；

* 有哪些交互？明确各个系统之间的交互方式；

## 几种系统划分边界的方法

系统之间交互有多种方式，各种方式有不同的适用场景，比如：RestAPI，消息总线，文件交互；

* RestAPI 这种方式一般是系统需要对外提供服务，这时候规定好接口规范，就可以通过接口方式与外部系统交互，实际应用场景：PRC；

* 消息总线 一般用kafka，一般用于通知类的交互，例如状态变更，下发通知，等少量的数据信息交互；双方系统需要规定好topic规范、以及生产者和消费者；如果做成消息发布式的，也就是有多个消费者，这样就需要做隔离，不同的消费者用groupid隔开，这样一份消息就能被多个消费者消费；

* 文件交互 这种交互方式分为两种：1、配置文件交互；2、日志文件交互；
配置文件交互就是一个系统生成一份配置文件到指定目录，另外一个系统按照规定的路径和规范去读取配置文件，例如调度平台提交任务就可以给每个任务生成一份配置文件，按照规范去解析，这样只需要制定一套规范就可以了；
日志文件交互，这种交互方式一般用于日志系统，日志系统采集多个系统的日志文件，就必须要定义一种日志规范。


------


